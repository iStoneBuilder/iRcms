<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.stone.it.rcms.base.dao.IEnterpriseDao">

  <delete id="deleteEnterpriseMerchant"></delete>

  <insert id="createEnterpriseMerchant">
    insert into tpl_enterprise_t(id, name, code, parent_id, level, type, sort, status,
    remark, principal, email, phone, created_by, created_time, updated_by, updated_time)
    values(#{id,jdbcType=BIGINT}, #{name,jdbcType=VARCHAR}, #{code,jdbcType=VARCHAR},
    #{parentId,jdbcType=BIGINT}, #{level,jdbcType=INTEGER}, #{type,jdbcType=VARCHAR},
    #{sort,jdbcType=INTEGER}, #{status,jdbcType=VARCHAR}, #{remark,jdbcType=VARCHAR},
    #{principal,jdbcType=VARCHAR}, #{email,jdbcType=VARCHAR}, #{phone,jdbcType=VARCHAR},
    'system',now(), 'system',
    now()
    )
  </insert>

  <select id="findEnterpriseList" resultType="com.stone.it.rcms.base.vo.EnterpriseVO">
    <include refid="query_sql"/>
  </select>

  <select id="findEnterpriseMerchantById"
    resultType="com.stone.it.rcms.base.vo.EnterpriseVO">
    <include refid="query_sql"/>
    where id = #{enterpriseId,jdbcType=BIGINT}
  </select>


  <select id="findMaxEnterpriseId" resultType="com.stone.it.rcms.base.vo.EnterpriseVO">
    <include refid="query_sql"/>
    where id = (select max(id) from tpl_enterprise_t)
  </select>

  <sql id="query_sql">
    select id, name, code, parent_id as parentId, level, type, sort, status,
    remark, principal, email, phone, created_time as createDate, created_by as createBy,
    updated_time as updateDate, updated_by as updateBy
    from tpl_enterprise_t
  </sql>

  <update id="updateEnterpriseMerchant"></update>
</mapper>